<div class="analytics-container">
    <h1>Analytics</h1>
    
    <!-- Ukupan broj zadataka -->
    <p *ngIf="taskCount !== null">Total Tasks Assigned: {{ taskCount }}</p>
    <p *ngIf="taskCount === null">Loading task count...</p>
  
    <!-- Broj zadataka po statusima -->
    <div *ngIf="taskCountByStatus; else loadingStatus">
      <p>Pending: {{ taskCountByStatus.pending }}</p>
      <p>Work in Progress: {{ taskCountByStatus['work in progress'] }}</p>
      <p>Done: {{ taskCountByStatus.done }}</p>
    </div>
    
    <!-- Placeholder dok se statusi učitavaju -->
    <ng-template #loadingStatus>
      <p>Loading task status count...</p>
    </ng-template>

    <hr>
  
    <h2>Projects and tasks on which the user is engaged:</h2>
    <!-- Prikazivanje projekata i zadataka korisnika -->
    <div *ngIf="userProjects; else loadingProjects">
      <div *ngFor="let project of userProjects">
        <h3>{{ project.project }}</h3>
        <ul>
          <li *ngFor="let task of project.tasks">{{ task }}</li>
        </ul>
      </div>
    </div>
    
    <!-- Placeholder dok se projekti učitavaju -->
    <ng-template #loadingProjects>
      <p>Loading user projects...</p>
    </ng-template>
<hr>

    <h2>Project Completion Status:</h2>
    <div *ngIf="projectCompletionStatuses; else loadingProjectCompletion">
      <div *ngFor="let status of projectCompletionStatuses">
        <h3>{{ status.project }}</h3>
        <p>Status: {{ status.completed ? 'Completed' : 'Not Completed' }}</p>
        <p>On Time: {{ status.completedOnTime ? 'Yes' : 'No' }}</p>
        <p>Expected End Date: {{ status.expectedEndDate }}</p>
      </div>
    </div>
    
    <ng-template #loadingProjectCompletion>
      <p>Loading project completion statuses...</p>
    </ng-template>
    
    <hr>
    <h2>Task Analytics</h2>
  
  <!-- Prikazivanje zadataka i njihovih statusa -->
  <div *ngIf="taskAnalytics && taskAnalytics.length > 0">
    <div *ngFor="let task of taskAnalytics">
      <h3>Task ID: {{ task.task_id }}</h3>
      <p><strong>Status Times:</strong></p>
      <ul>
        <li>Pending: {{ task.status_times.pending }} seconds</li>
        <li>Work in Progress: {{ task.status_times['work in progress'] }} seconds</li>
      </ul>
      <p><strong>Last Status Change:</strong> {{ task.last_status_change | date: 'medium' }}</p>
    </div>
  </div>

  </div>
  